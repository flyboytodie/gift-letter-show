{"mappings":"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","sources":["show.2fe1864d.js","js/show.js"],"sourcesContent":[null,"// å…¨å±€å˜é‡\r\nlet gifts = [];\r\nlet currentImageIndex = 0;\r\nlet audio = null;\r\n\r\n// è·å–URLå‚æ•°\r\nfunction getUrlParams() {\r\n    const params = {};\r\n    const search = window.location.search;\r\n    if (search) {\r\n        search.substring(1).split('&').forEach(pair => {\r\n            const [key, value] = pair.split('=');\r\n            params[decodeURIComponent(key)] = decodeURIComponent(value);\r\n        });\r\n    }\r\n    return params;\r\n}\r\n\r\n// åŠ è½½å±•ç¤ºæ•°æ®\r\nasync function loadShowData() {\r\n    try {\r\n        const params = getUrlParams();\r\n        const showId = params.id;\r\n        \r\n        if (!showId) {\r\n            document.body.innerHTML = `\r\n                <div style=\"text-align: center; margin-top: 100px;\">\r\n                    <h1>é”™è¯¯</h1>\r\n                    <p>ç¼ºå°‘å±•ç¤ºIDï¼Œè¯·é€šè¿‡æ­£ç¡®çš„é“¾æ¥è®¿é—®ã€‚</p>\r\n                </div>\r\n            `;\r\n            return;\r\n        }\r\n        \r\n        // ä»åç«¯è·å–æ•°æ®\r\n        const response = await fetch(`/api/get-show?id=${showId}`);\r\n        const result = await response.json();\r\n        \r\n        if (result.success) {\r\n            const data = result.data;\r\n            \r\n            // åº”ç”¨ä¸»é¢˜è‰²\r\n            if (data.theme) {\r\n                document.body.classList.remove('pink', 'white', 'blue');\r\n                document.body.classList.add(data.theme);\r\n            }\r\n            \r\n            // æ›´æ–°é¡µé¢æ ‡é¢˜\r\n            document.title = data.siteTitle;\r\n            document.getElementById('site-title').textContent = data.siteTitle;\r\n            \r\n            // æ›´æ–°ä¹¦ä¿¡æ ‡é¢˜å’Œå†…å®¹\r\n            document.getElementById('letter-title').textContent = data.letterTitle;\r\n            document.getElementById('letter-content').innerHTML = data.letterContent;\r\n            \r\n            // æ›´æ–°ç¤¼ç‰©åˆ—è¡¨\r\n            gifts = data.gifts;\r\n            renderGifts();\r\n            \r\n            // åˆå§‹åŒ–éŸ³é¢‘\r\n            if (data.audioUrl) {\r\n                audio = new Howl({\r\n                    src: [data.audioUrl],\r\n                    loop: true,\r\n                    volume: 0.5,\r\n                    autoplay: true\r\n                });\r\n                // å°è¯•è‡ªåŠ¨æ’­æ”¾\r\n                audio.play();\r\n                // æ›´æ–°æ’­æ”¾æŒ‰é’®æ–‡æœ¬\r\n                document.getElementById('play-btn').textContent = 'æš‚åœ';\r\n                \r\n                // æ›´æ–°éŸ³ä¹æ–‡ä»¶åæ˜¾ç¤º\r\n                if (data.audioName) {\r\n                    document.getElementById('music-name').textContent = data.audioName;\r\n                }\r\n            }\r\n        } else {\r\n            document.body.innerHTML = `\r\n                <div style=\"text-align: center; margin-top: 100px;\">\r\n                    <h1>é”™è¯¯</h1>\r\n                    <p>${result.error || 'è·å–å±•ç¤ºæ•°æ®å¤±è´¥'}</p>\r\n                </div>\r\n            `;\r\n        }\r\n    } catch (error) {\r\n        console.error('åŠ è½½æ•°æ®å¤±è´¥:', error);\r\n        document.body.innerHTML = `\r\n            <div style=\"text-align: center; margin-top: 100px;\">\r\n                <h1>é”™è¯¯</h1>\r\n                <p>åŠ è½½æ•°æ®å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•ã€‚</p>\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\n// æ¸²æŸ“ç¤¼ç‰©åˆ—è¡¨\r\nfunction renderGifts() {\r\n    const giftGrid = document.getElementById('gift-grid');\r\n    giftGrid.innerHTML = '';\r\n    \r\n    gifts.forEach((gift, index) => {\r\n        const giftItem = document.createElement('div');\r\n        giftItem.className = 'gift-item';\r\n        \r\n        // åˆ›å»ºåª’ä½“å®¹å™¨\r\n        const mediaContainer = document.createElement('div');\r\n        mediaContainer.className = 'gift-media-container';\r\n        \r\n        // åˆ›å»ºåª’ä½“å…ƒç´ \r\n        let mediaElement;\r\n        if (gift.type === 'image') {\r\n            mediaElement = document.createElement('img');\r\n            mediaElement.src = gift.url;\r\n            mediaElement.alt = 'ç¤¼ç‰©å›¾ç‰‡';\r\n            mediaElement.className = 'gift-media';\r\n            mediaElement.onclick = function() {\r\n                openImageModal(index);\r\n            };\r\n        } else {\r\n            mediaElement = document.createElement('video');\r\n            mediaElement.src = gift.url;\r\n            mediaElement.className = 'gift-media';\r\n            mediaElement.onclick = function() {\r\n                this.play();\r\n            };\r\n        }\r\n        \r\n        // åˆ›å»ºå¤‡æ³¨å…ƒç´ \r\n        const noteElement = document.createElement('div');\r\n        noteElement.className = 'gift-note';\r\n        noteElement.textContent = gift.note || 'æ— å¤‡æ³¨';\r\n        \r\n        // ç»„è£…å…ƒç´ \r\n        mediaContainer.appendChild(mediaElement);\r\n        giftItem.appendChild(mediaContainer);\r\n        giftItem.appendChild(noteElement);\r\n        \r\n        // æ·»åŠ åˆ°ç½‘æ ¼\r\n        giftGrid.appendChild(giftItem);\r\n    });\r\n}\r\n\r\n// åˆå§‹åŒ–é¡µé¢\r\nfunction initPage() {\r\n    initMusicPlayer();\r\n    initImageModal();\r\n    loadShowData();\r\n    initEmojiRain();\r\n}\r\n\r\n// åˆå§‹åŒ–éŸ³ä¹æ’­æ”¾å™¨\r\nfunction initMusicPlayer() {\r\n    document.getElementById('play-btn').addEventListener('click', function() {\r\n        if (audio) {\r\n            if (audio.playing()) {\r\n                audio.pause();\r\n                this.textContent = 'æ’­æ”¾';\r\n            } else {\r\n                audio.play();\r\n                this.textContent = 'æš‚åœ';\r\n            }\r\n        }\r\n    });\r\n    \r\n    document.getElementById('volume').addEventListener('input', function() {\r\n        if (audio) {\r\n            audio.volume(parseFloat(this.value));\r\n        }\r\n    });\r\n}\r\n\r\n// åˆå§‹åŒ–å›¾ç‰‡å¼¹çª—\r\nfunction initImageModal() {\r\n    // å…³é—­æŒ‰é’®\r\n    document.querySelector('.close').addEventListener('click', closeImageModal);\r\n    \r\n    // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­\r\n    window.addEventListener('click', function(e) {\r\n        const modal = document.getElementById('image-modal');\r\n        if (e.target === modal) {\r\n            closeImageModal();\r\n        }\r\n    });\r\n}\r\n\r\n// æ‰“å¼€å›¾ç‰‡å¼¹çª—\r\nfunction openImageModal(index) {\r\n    currentImageIndex = index;\r\n    const gift = gifts[index];\r\n    if (gift.type === 'image') {\r\n        document.getElementById('modal-image').src = gift.url;\r\n        document.getElementById('image-modal').style.display = 'block';\r\n    }\r\n}\r\n\r\n// å…³é—­å›¾ç‰‡å¼¹çª—\r\nfunction closeImageModal() {\r\n    document.getElementById('image-modal').style.display = 'none';\r\n}\r\n\r\n// å¯¼èˆªå›¾ç‰‡\r\nfunction navigateImage(direction) {\r\n    // è¿‡æ»¤å‡ºæ‰€æœ‰å›¾ç‰‡ç¤¼ç‰©\r\n    const imageGifts = gifts.filter(gift => gift.type === 'image');\r\n    if (imageGifts.length === 0) return;\r\n    \r\n    // è®¡ç®—å½“å‰å›¾ç‰‡åœ¨å›¾ç‰‡ç¤¼ç‰©ä¸­çš„ç´¢å¼•\r\n    let currentImageGiftIndex = imageGifts.findIndex(gift => {\r\n        return gift.url === gifts[currentImageIndex].url;\r\n    });\r\n    \r\n    // æ›´æ–°ç´¢å¼•\r\n    currentImageGiftIndex = (currentImageGiftIndex + direction + imageGifts.length) % imageGifts.length;\r\n    \r\n    // æ‰¾åˆ°å¯¹åº”çš„ç¤¼ç‰©ç´¢å¼•\r\n    const giftIndex = gifts.findIndex(gift => {\r\n        return gift.url === imageGifts[currentImageGiftIndex].url;\r\n    });\r\n    \r\n    // æ‰“å¼€æ–°å›¾ç‰‡\r\n    openImageModal(giftIndex);\r\n}\r\n\r\n// åˆå§‹åŒ–è¡¨æƒ…æ‰è½åŠ¨ç”»\r\nfunction initEmojiRain() {\r\n    const letterContent = document.querySelector('.letter-content');\r\n    \r\n    // å¯çˆ±è¡¨æƒ…é›†åˆ\r\n    const emojis = ['ğŸ˜Š', 'ğŸ¥°', 'ğŸ¤©', 'ğŸŒŸ', 'ğŸ€', 'ğŸ‰', 'âœ¨', 'ğŸ’–', 'ğŸŒ¸', 'ğŸ¦‹', 'ğŸŒˆ', 'ğŸ’', 'ğŸ’—', 'ğŸ’“', 'ğŸ’'];\r\n    \r\n    // é¡µé¢åŠ è½½åè‡ªåŠ¨è§¦å‘ä¸€äº›è¡¨æƒ…æ‰è½\r\n    setTimeout(() => {\r\n        createEmojiRain(letterContent, emojis);\r\n    }, 500);\r\n    \r\n    // æ¯éš”ä¸€æ®µæ—¶é—´è§¦å‘è¡¨æƒ…æ‰è½\r\n    setInterval(() => {\r\n        createEmojiRain(letterContent, emojis);\r\n    }, 2000);\r\n}\r\n\r\n// åˆ›å»ºè¡¨æƒ…æ‰è½æ•ˆæœ\r\nfunction createEmojiRain(container, emojis) {\r\n    // é™åˆ¶åŒæ—¶æ˜¾ç¤ºçš„è¡¨æƒ…æ•°é‡\r\n    const existingEmojis = container.querySelectorAll('.emoji-rain');\r\n    if (existingEmojis.length > 20) return;\r\n    \r\n    // åˆ›å»ºå¤šä¸ªè¡¨æƒ…\r\n    const emojiCount = Math.floor(Math.random() * 5) + 3;\r\n    \r\n    for (let i = 0; i < emojiCount; i++) {\r\n        const emoji = document.createElement('div');\r\n        emoji.className = 'emoji-rain';\r\n        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];\r\n        \r\n        // éšæœºä½ç½®å’Œæ ·å¼\r\n        const left = Math.random() * 100;\r\n        const fontSize = Math.random() * 25 + 20;\r\n        const duration = Math.random() * 4 + 2;\r\n        \r\n        emoji.style.position = 'absolute';\r\n        emoji.style.left = `${left}%`;\r\n        emoji.style.top = '-30px';\r\n        emoji.style.fontSize = `${fontSize}px`;\r\n        emoji.style.pointerEvents = 'none';\r\n        emoji.style.zIndex = '10';\r\n        emoji.style.animation = `emojiFall ${duration}s ease-in-out forwards`;\r\n        \r\n        container.appendChild(emoji);\r\n        \r\n        // åŠ¨ç”»ç»“æŸåç§»é™¤\r\n        setTimeout(() => {\r\n            emoji.remove();\r\n        }, duration * 1000);\r\n    }\r\n}\r\n\r\n// é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–\r\nwindow.onload = initPage;"],"names":[],"version":3,"file":"show.49dc9e9b.js.map","sourceRoot":"/__parcel_source_root/"}