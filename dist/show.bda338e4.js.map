{"mappings":"ACCA,IAAI,MAAQ,EAAE,CACV,kBAAoB,EACpB,MAAQ,KAGZ,SAAS,eACL,IAAM,EAAS,CAAC,EACV,EAAS,OAAO,QAAQ,CAAC,MAAM,CAOrC,OANI,GACA,EAAO,SAAS,CAAC,GAAG,KAAK,CAAC,KAAK,OAAO,CAAC,AAAA,IACnC,GAAM,CAAC,EAAK,EAAM,CAAG,EAAK,KAAK,CAAC,IAChC,CAAA,CAAM,CAAC,mBAAmB,GAAK,CAAG,mBAAmB,EACzD,GAEG,CACX,CAGA,eAAe,eACX,GAAI,CAEA,IAAM,EAAS,AADA,eACO,EAAE,CAExB,GAAI,CAAC,EAAQ,CACT,SAAS,IAAI,CAAC,SAAS,CAAG;AAAE;AAC4B;AACtC;AACa;AACxB,YACP,CAAC,CACD,MACJ,CAGA,IAAM,EAAW,MAAM,MAAM,CAAC,iBAAiB,EAAE,EAAA,CAAQ,EACnD,EAAS,MAAM,EAAS,IAAI,GAElC,GAAI,EAAO,OAAO,CAAE,CAChB,IAAM,EAAO,EAAO,IAAI,AAGpB,CAAA,EAAK,KAAK,GACV,SAAS,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,OAAQ,QAAS,QAChD,SAAS,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,EAAK,KAAK,GAI1C,SAAS,KAAK,CAAG,EAAK,SAAS,CAC/B,SAAS,cAAc,CAAC,cAAc,WAAW,CAAG,EAAK,SAAS,CAGlE,SAAS,cAAc,CAAC,gBAAgB,WAAW,CAAG,EAAK,WAAW,CACtE,SAAS,cAAc,CAAC,kBAAkB,SAAS,CAAG,EAAK,aAAa,CAGxE,MAAQ,EAAK,KAAK,CAClB,cAGI,EAAK,QAAQ,GAQb,AAPA,CAAA,MAAQ,IAAI,KAAK,CACb,IAAK,CAAC,EAAK,QAAQ,CAAC,CACpB,KAAM,CAAA,EACN,OAAQ,GACR,SAAU,CAAA,CACd,EAAA,EAEM,IAAI,GAEV,SAAS,cAAc,CAAC,YAAY,WAAW,CAAG,KAG9C,EAAK,SAAS,EACd,CAAA,SAAS,cAAc,CAAC,cAAc,WAAW,CAAG,EAAK,SAAS,AAAT,EAGrE,MACI,SAAS,IAAI,CAAC,SAAS,CAAG;AAAE;AAC4B;AACtC,uBACP,EAAE,EAAO,KAAK,EAAI,WAAW;A;AAExC,YAAA,CAAC,AAET,CAAE,MAAO,EAAO,CACZ,QAAQ,KAAK,CAAC,UAAW,GACzB,SAAS,IAAI,CAAC,SAAS,CAAG;AAAE;AAC4B;AACtC;AACQ;AACnB,QACP,CAAC,AACL,CACJ,CAGA,SAAS,cACL,IAAM,EAAW,SAAS,cAAc,CAAC,YACzC,CAAA,EAAS,SAAS,CAAG,GAErB,MAAM,OAAO,CAAC,CAAC,EAAM,KACjB,IAQI,EARE,EAAW,SAAS,aAAa,CAAC,MACxC,CAAA,EAAS,SAAS,CAAG,YAGrB,IAAM,EAAiB,SAAS,aAAa,CAAC,MAC9C,CAAA,EAAe,SAAS,CAAG,uBAIvB,AAAc,UAAd,EAAK,IAAI,EAET,AADA,CAAA,EAAe,SAAS,aAAa,CAAC,MAAtC,EACa,GAAG,CAAG,EAAK,GAAG,CAC3B,EAAa,GAAG,CAAG,OACnB,EAAa,SAAS,CAAG,aACzB,EAAa,OAAO,CAAG,WACnB,eAAe,EACnB,IAGA,AADA,CAAA,EAAe,SAAS,aAAa,CAAC,QAAtC,EACa,GAAG,CAAG,EAAK,GAAG,CAC3B,EAAa,SAAS,CAAG,aACzB,EAAa,OAAO,CAAG,WACnB,IAAI,CAAC,IAAI,EACb,GAIJ,IAAM,EAAc,SAAS,aAAa,CAAC,MAC3C,CAAA,EAAY,SAAS,CAAG,YACxB,EAAY,WAAW,CAAG,EAAK,IAAI,EAAI,MAGvC,EAAe,WAAW,CAAC,GAC3B,EAAS,WAAW,CAAC,GACrB,EAAS,WAAW,CAAC,GAGrB,EAAS,WAAW,CAAC,EACzB,EACJ,CAGA,SAAS,WACL,kBACA,iBACA,eACA,eACJ,CAGA,SAAS,kBACL,SAAS,cAAc,CAAC,YAAY,gBAAgB,CAAC,QAAS,WACtD,QACI,MAAM,OAAO,IACb,MAAM,KAAK,GACX,IAAI,CAAC,WAAW,CAAG,OAEnB,MAAM,IAAI,GACV,IAAI,CAAC,WAAW,CAAG,MAG/B,GAEA,SAAS,cAAc,CAAC,UAAU,gBAAgB,CAAC,QAAS,WACpD,OACA,MAAM,MAAM,CAAC,WAAW,IAAI,CAAC,KAAK,EAE1C,EACJ,CAGA,SAAS,iBAEL,SAAS,aAAa,CAAC,UAAU,gBAAgB,CAAC,QAAS,iBAG3D,OAAO,gBAAgB,CAAC,QAAS,SAAS,CAAC,EACvC,IAAM,EAAQ,SAAS,cAAc,CAAC,cAClC,CAAA,EAAE,MAAM,GAAK,GACb,iBAER,EACJ,CAGA,SAAS,eAAe,CAAK,EACzB,kBAAoB,EACpB,IAAM,EAAO,KAAK,CAAC,EAAM,AACP,CAAA,UAAd,EAAK,IAAI,GACT,SAAS,cAAc,CAAC,eAAe,GAAG,CAAG,EAAK,GAAG,CACrD,SAAS,cAAc,CAAC,eAAe,KAAK,CAAC,OAAO,CAAG,QAE/D,CAGA,SAAS,kBACL,SAAS,cAAc,CAAC,eAAe,KAAK,CAAC,OAAO,CAAG,MAC3D,CAGA,SAAS,cAAc,CAAS,EAE5B,IAAM,EAAa,MAAM,MAAM,CAAC,AAAA,GAAQ,AAAc,UAAd,EAAK,IAAI,EACjD,GAAI,AAAsB,IAAtB,EAAW,MAAM,CAAQ,OAG7B,IAAI,EAAwB,EAAW,SAAS,CAAC,AAAA,GACtC,EAAK,GAAG,GAAK,KAAK,CAAC,kBAAkB,CAAC,GAAG,EAIpD,EAAwB,AAAC,CAAA,EAAwB,EAAY,EAAW,MAAK,AAAL,EAAU,EAAW,MAAM,CAQnG,eALkB,MAAM,SAAS,CAAC,AAAA,GACvB,EAAK,GAAG,GAAK,CAAU,CAAC,EAAsB,CAAC,GAAG,EAKjE,CAGA,SAAS,gBACL,IAAM,EAAgB,SAAS,aAAa,CAAC,mBAGvC,EAAS,CAAC,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAK,CAGxG,WAAW,KACP,gBAAgB,EAAe,EACnC,EAAG,KAGH,YAAY,KACR,gBAAgB,EAAe,EACnC,EAAG,IACP,CAGA,SAAS,gBAAgB,CAAS,CAAE,CAAM,EAGtC,GAAI,AADmB,EAAU,gBAAgB,CAAC,eAC/B,MAAM,CAAG,GAAI,OAGhC,IAAM,EAAa,KAAK,KAAK,CAAC,AAAgB,EAAhB,KAAK,MAAM,IAAU,EAEnD,IAAK,IAAI,EAAI,EAAG,EAAI,EAAY,IAAK,CACjC,IAAM,EAAQ,SAAS,aAAa,CAAC,MACrC,CAAA,EAAM,SAAS,CAAG,aAClB,EAAM,WAAW,CAAG,CAAM,CAAC,KAAK,KAAK,CAAC,KAAK,MAAM,GAAK,EAAO,MAAM,EAAE,CAGrE,IAAM,EAAO,AAAgB,IAAhB,KAAK,MAAM,GAClB,EAAW,AAAgB,GAAhB,KAAK,MAAM,GAAU,GAChC,EAAW,AAAgB,EAAhB,KAAK,MAAM,GAAS,CAErC,CAAA,EAAM,KAAK,CAAC,QAAQ,CAAG,WACvB,EAAM,KAAK,CAAC,IAAI,CAAG,CAAA,EAAG,EAAK,CAAC,CAAC,CAC7B,EAAM,KAAK,CAAC,GAAG,CAAG,QAClB,EAAM,KAAK,CAAC,QAAQ,CAAG,CAAA,EAAG,EAAS,EAAE,CAAC,CACtC,EAAM,KAAK,CAAC,aAAa,CAAG,OAC5B,EAAM,KAAK,CAAC,MAAM,CAAG,KACrB,EAAM,KAAK,CAAC,SAAS,CAAG,CAAC,UAAU,EAAE,EAAS,sBAAsB,CAAC,CAErE,EAAU,WAAW,CAAC,GAGtB,WAAW,KACP,EAAM,MAAM,EAChB,EAAG,AAAW,IAAX,EACP,CACJ,CAGA,OAAO,MAAM,CAAG","sources":["<anon>","js/show.js"],"sourcesContent":["// ÂÖ®Â±ÄÂèòÈáè\nlet gifts = [];\nlet currentImageIndex = 0;\nlet audio = null;\n// Ëé∑ÂèñURLÂèÇÊï∞\nfunction getUrlParams() {\n    const params = {};\n    const search = window.location.search;\n    if (search) search.substring(1).split('&').forEach((pair)=>{\n        const [key, value] = pair.split('=');\n        params[decodeURIComponent(key)] = decodeURIComponent(value);\n    });\n    return params;\n}\n// Âä†ËΩΩÂ±ïÁ§∫Êï∞ÊçÆ\nasync function loadShowData() {\n    try {\n        const params = getUrlParams();\n        const showId = params.id;\n        if (!showId) {\n            document.body.innerHTML = `\n                <div style=\"text-align: center; margin-top: 100px;\">\n                    <h1>\\u{9519}\\u{8BEF}</h1>\n                    <p>\\u{7F3A}\\u{5C11}\\u{5C55}\\u{793A}ID\\u{FF0C}\\u{8BF7}\\u{901A}\\u{8FC7}\\u{6B63}\\u{786E}\\u{7684}\\u{94FE}\\u{63A5}\\u{8BBF}\\u{95EE}\\u{3002}</p>\n                </div>\n            `;\n            return;\n        }\n        // ‰ªéÂêéÁ´ØËé∑ÂèñÊï∞ÊçÆ\n        const response = await fetch(`/api/get-show?id=${showId}`);\n        const result = await response.json();\n        if (result.success) {\n            const data = result.data;\n            // Â∫îÁî®‰∏ªÈ¢òËâ≤\n            if (data.theme) {\n                document.body.classList.remove('pink', 'white', 'blue');\n                document.body.classList.add(data.theme);\n            }\n            // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢ò\n            document.title = data.siteTitle;\n            document.getElementById('site-title').textContent = data.siteTitle;\n            // Êõ¥Êñ∞‰π¶‰ø°Ê†áÈ¢òÂíåÂÜÖÂÆπ\n            document.getElementById('letter-title').textContent = data.letterTitle;\n            document.getElementById('letter-content').innerHTML = data.letterContent;\n            // Êõ¥Êñ∞Á§ºÁâ©ÂàóË°®\n            gifts = data.gifts;\n            renderGifts();\n            // ÂàùÂßãÂåñÈü≥È¢ë\n            if (data.audioUrl) {\n                audio = new Howl({\n                    src: [\n                        data.audioUrl\n                    ],\n                    loop: true,\n                    volume: 0.5,\n                    autoplay: true\n                });\n                // Â∞ùËØïËá™Âä®Êí≠Êîæ\n                audio.play();\n                // Êõ¥Êñ∞Êí≠ÊîæÊåâÈíÆÊñáÊú¨\n                document.getElementById('play-btn').textContent = \"\\u6682\\u505C\";\n                // Êõ¥Êñ∞Èü≥‰πêÊñá‰ª∂ÂêçÊòæÁ§∫\n                if (data.audioName) document.getElementById('music-name').textContent = data.audioName;\n            }\n        } else document.body.innerHTML = `\n                <div style=\"text-align: center; margin-top: 100px;\">\n                    <h1>\\u{9519}\\u{8BEF}</h1>\n                    <p>${result.error || \"\\u83B7\\u53D6\\u5C55\\u793A\\u6570\\u636E\\u5931\\u8D25\"}</p>\n                </div>\n            `;\n    } catch (error) {\n        console.error(\"\\u52A0\\u8F7D\\u6570\\u636E\\u5931\\u8D25:\", error);\n        document.body.innerHTML = `\n            <div style=\"text-align: center; margin-top: 100px;\">\n                <h1>\\u{9519}\\u{8BEF}</h1>\n                <p>\\u{52A0}\\u{8F7D}\\u{6570}\\u{636E}\\u{5931}\\u{8D25}\\u{FF0C}\\u{8BF7}\\u{7A0D}\\u{540E}\\u{91CD}\\u{8BD5}\\u{3002}</p>\n            </div>\n        `;\n    }\n}\n// Ê∏≤ÊüìÁ§ºÁâ©ÂàóË°®\nfunction renderGifts() {\n    const giftGrid = document.getElementById('gift-grid');\n    giftGrid.innerHTML = '';\n    gifts.forEach((gift, index)=>{\n        const giftItem = document.createElement('div');\n        giftItem.className = 'gift-item';\n        // ÂàõÂª∫Â™í‰ΩìÂÆπÂô®\n        const mediaContainer = document.createElement('div');\n        mediaContainer.className = 'gift-media-container';\n        // ÂàõÂª∫Â™í‰ΩìÂÖÉÁ¥†\n        let mediaElement;\n        if (gift.type === 'image') {\n            mediaElement = document.createElement('img');\n            mediaElement.src = gift.url;\n            mediaElement.alt = \"\\u793C\\u7269\\u56FE\\u7247\";\n            mediaElement.className = 'gift-media';\n            mediaElement.onclick = function() {\n                openImageModal(index);\n            };\n        } else {\n            mediaElement = document.createElement('video');\n            mediaElement.src = gift.url;\n            mediaElement.className = 'gift-media';\n            mediaElement.onclick = function() {\n                this.play();\n            };\n        }\n        // ÂàõÂª∫Â§áÊ≥®ÂÖÉÁ¥†\n        const noteElement = document.createElement('div');\n        noteElement.className = 'gift-note';\n        noteElement.textContent = gift.note || \"\\u65E0\\u5907\\u6CE8\";\n        // ÁªÑË£ÖÂÖÉÁ¥†\n        mediaContainer.appendChild(mediaElement);\n        giftItem.appendChild(mediaContainer);\n        giftItem.appendChild(noteElement);\n        // Ê∑ªÂä†Âà∞ÁΩëÊ†º\n        giftGrid.appendChild(giftItem);\n    });\n}\n// ÂàùÂßãÂåñÈ°µÈù¢\nfunction initPage() {\n    initMusicPlayer();\n    initImageModal();\n    loadShowData();\n    initEmojiRain();\n}\n// ÂàùÂßãÂåñÈü≥‰πêÊí≠ÊîæÂô®\nfunction initMusicPlayer() {\n    document.getElementById('play-btn').addEventListener('click', function() {\n        if (audio) {\n            if (audio.playing()) {\n                audio.pause();\n                this.textContent = \"\\u64AD\\u653E\";\n            } else {\n                audio.play();\n                this.textContent = \"\\u6682\\u505C\";\n            }\n        }\n    });\n    document.getElementById('volume').addEventListener('input', function() {\n        if (audio) audio.volume(parseFloat(this.value));\n    });\n}\n// ÂàùÂßãÂåñÂõæÁâáÂºπÁ™ó\nfunction initImageModal() {\n    // ÂÖ≥Èó≠ÊåâÈíÆ\n    document.querySelector('.close').addEventListener('click', closeImageModal);\n    // ÁÇπÂáªÂºπÁ™óÂ§ñÈÉ®ÂÖ≥Èó≠\n    window.addEventListener('click', function(e) {\n        const modal = document.getElementById('image-modal');\n        if (e.target === modal) closeImageModal();\n    });\n}\n// ÊâìÂºÄÂõæÁâáÂºπÁ™ó\nfunction openImageModal(index) {\n    currentImageIndex = index;\n    const gift = gifts[index];\n    if (gift.type === 'image') {\n        document.getElementById('modal-image').src = gift.url;\n        document.getElementById('image-modal').style.display = 'block';\n    }\n}\n// ÂÖ≥Èó≠ÂõæÁâáÂºπÁ™ó\nfunction closeImageModal() {\n    document.getElementById('image-modal').style.display = 'none';\n}\n// ÂØºËà™ÂõæÁâá\nfunction navigateImage(direction) {\n    // ËøáÊª§Âá∫ÊâÄÊúâÂõæÁâáÁ§ºÁâ©\n    const imageGifts = gifts.filter((gift)=>gift.type === 'image');\n    if (imageGifts.length === 0) return;\n    // ËÆ°ÁÆóÂΩìÂâçÂõæÁâáÂú®ÂõæÁâáÁ§ºÁâ©‰∏≠ÁöÑÁ¥¢Âºï\n    let currentImageGiftIndex = imageGifts.findIndex((gift)=>{\n        return gift.url === gifts[currentImageIndex].url;\n    });\n    // Êõ¥Êñ∞Á¥¢Âºï\n    currentImageGiftIndex = (currentImageGiftIndex + direction + imageGifts.length) % imageGifts.length;\n    // ÊâæÂà∞ÂØπÂ∫îÁöÑÁ§ºÁâ©Á¥¢Âºï\n    const giftIndex = gifts.findIndex((gift)=>{\n        return gift.url === imageGifts[currentImageGiftIndex].url;\n    });\n    // ÊâìÂºÄÊñ∞ÂõæÁâá\n    openImageModal(giftIndex);\n}\n// ÂàùÂßãÂåñË°®ÊÉÖÊéâËêΩÂä®Áîª\nfunction initEmojiRain() {\n    const letterContent = document.querySelector('.letter-content');\n    // ÂèØÁà±Ë°®ÊÉÖÈõÜÂêà\n    const emojis = [\n        \"\\uD83D\\uDE0A\",\n        \"\\uD83E\\uDD70\",\n        \"\\uD83E\\uDD29\",\n        \"\\uD83C\\uDF1F\",\n        \"\\uD83C\\uDF80\",\n        \"\\uD83C\\uDF89\",\n        \"\\u2728\",\n        \"\\uD83D\\uDC96\",\n        \"\\uD83C\\uDF38\",\n        \"\\uD83E\\uDD8B\",\n        \"\\uD83C\\uDF08\",\n        \"\\uD83D\\uDC9D\",\n        \"\\uD83D\\uDC97\",\n        \"\\uD83D\\uDC93\",\n        \"\\uD83D\\uDC9E\"\n    ];\n    // È°µÈù¢Âä†ËΩΩÂêéËá™Âä®Ëß¶Âèë‰∏Ä‰∫õË°®ÊÉÖÊéâËêΩ\n    setTimeout(()=>{\n        createEmojiRain(letterContent, emojis);\n    }, 500);\n    // ÊØèÈöî‰∏ÄÊÆµÊó∂Èó¥Ëß¶ÂèëË°®ÊÉÖÊéâËêΩ\n    setInterval(()=>{\n        createEmojiRain(letterContent, emojis);\n    }, 2000);\n}\n// ÂàõÂª∫Ë°®ÊÉÖÊéâËêΩÊïàÊûú\nfunction createEmojiRain(container, emojis) {\n    // ÈôêÂà∂ÂêåÊó∂ÊòæÁ§∫ÁöÑË°®ÊÉÖÊï∞Èáè\n    const existingEmojis = container.querySelectorAll('.emoji-rain');\n    if (existingEmojis.length > 20) return;\n    // ÂàõÂª∫Â§ö‰∏™Ë°®ÊÉÖ\n    const emojiCount = Math.floor(Math.random() * 5) + 3;\n    for(let i = 0; i < emojiCount; i++){\n        const emoji = document.createElement('div');\n        emoji.className = 'emoji-rain';\n        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];\n        // ÈöèÊú∫‰ΩçÁΩÆÂíåÊ†∑Âºè\n        const left = Math.random() * 100;\n        const fontSize = Math.random() * 25 + 20;\n        const duration = Math.random() * 4 + 2;\n        emoji.style.position = 'absolute';\n        emoji.style.left = `${left}%`;\n        emoji.style.top = '-30px';\n        emoji.style.fontSize = `${fontSize}px`;\n        emoji.style.pointerEvents = 'none';\n        emoji.style.zIndex = '10';\n        emoji.style.animation = `emojiFall ${duration}s ease-in-out forwards`;\n        container.appendChild(emoji);\n        // Âä®ÁîªÁªìÊùüÂêéÁßªÈô§\n        setTimeout(()=>{\n            emoji.remove();\n        }, duration * 1000);\n    }\n}\n// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ\nwindow.onload = initPage;\n\n//# sourceMappingURL=show.bda338e4.js.map\n","// ÂÖ®Â±ÄÂèòÈáè\r\nlet gifts = [];\r\nlet currentImageIndex = 0;\r\nlet audio = null;\r\n\r\n// Ëé∑ÂèñURLÂèÇÊï∞\r\nfunction getUrlParams() {\r\n    const params = {};\r\n    const search = window.location.search;\r\n    if (search) {\r\n        search.substring(1).split('&').forEach(pair => {\r\n            const [key, value] = pair.split('=');\r\n            params[decodeURIComponent(key)] = decodeURIComponent(value);\r\n        });\r\n    }\r\n    return params;\r\n}\r\n\r\n// Âä†ËΩΩÂ±ïÁ§∫Êï∞ÊçÆ\r\nasync function loadShowData() {\r\n    try {\r\n        const params = getUrlParams();\r\n        const showId = params.id;\r\n        \r\n        if (!showId) {\r\n            document.body.innerHTML = `\r\n                <div style=\"text-align: center; margin-top: 100px;\">\r\n                    <h1>ÈîôËØØ</h1>\r\n                    <p>Áº∫Â∞ëÂ±ïÁ§∫IDÔºåËØ∑ÈÄöËøáÊ≠£Á°ÆÁöÑÈìæÊé•ËÆøÈóÆ„ÄÇ</p>\r\n                </div>\r\n            `;\r\n            return;\r\n        }\r\n        \r\n        // ‰ªéÂêéÁ´ØËé∑ÂèñÊï∞ÊçÆ\r\n        const response = await fetch(`/api/get-show?id=${showId}`);\r\n        const result = await response.json();\r\n        \r\n        if (result.success) {\r\n            const data = result.data;\r\n            \r\n            // Â∫îÁî®‰∏ªÈ¢òËâ≤\r\n            if (data.theme) {\r\n                document.body.classList.remove('pink', 'white', 'blue');\r\n                document.body.classList.add(data.theme);\r\n            }\r\n            \r\n            // Êõ¥Êñ∞È°µÈù¢Ê†áÈ¢ò\r\n            document.title = data.siteTitle;\r\n            document.getElementById('site-title').textContent = data.siteTitle;\r\n            \r\n            // Êõ¥Êñ∞‰π¶‰ø°Ê†áÈ¢òÂíåÂÜÖÂÆπ\r\n            document.getElementById('letter-title').textContent = data.letterTitle;\r\n            document.getElementById('letter-content').innerHTML = data.letterContent;\r\n            \r\n            // Êõ¥Êñ∞Á§ºÁâ©ÂàóË°®\r\n            gifts = data.gifts;\r\n            renderGifts();\r\n            \r\n            // ÂàùÂßãÂåñÈü≥È¢ë\r\n            if (data.audioUrl) {\r\n                audio = new Howl({\r\n                    src: [data.audioUrl],\r\n                    loop: true,\r\n                    volume: 0.5,\r\n                    autoplay: true\r\n                });\r\n                // Â∞ùËØïËá™Âä®Êí≠Êîæ\r\n                audio.play();\r\n                // Êõ¥Êñ∞Êí≠ÊîæÊåâÈíÆÊñáÊú¨\r\n                document.getElementById('play-btn').textContent = 'ÊöÇÂÅú';\r\n                \r\n                // Êõ¥Êñ∞Èü≥‰πêÊñá‰ª∂ÂêçÊòæÁ§∫\r\n                if (data.audioName) {\r\n                    document.getElementById('music-name').textContent = data.audioName;\r\n                }\r\n            }\r\n        } else {\r\n            document.body.innerHTML = `\r\n                <div style=\"text-align: center; margin-top: 100px;\">\r\n                    <h1>ÈîôËØØ</h1>\r\n                    <p>${result.error || 'Ëé∑ÂèñÂ±ïÁ§∫Êï∞ÊçÆÂ§±Ë¥•'}</p>\r\n                </div>\r\n            `;\r\n        }\r\n    } catch (error) {\r\n        console.error('Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•:', error);\r\n        document.body.innerHTML = `\r\n            <div style=\"text-align: center; margin-top: 100px;\">\r\n                <h1>ÈîôËØØ</h1>\r\n                <p>Âä†ËΩΩÊï∞ÊçÆÂ§±Ë¥•ÔºåËØ∑Á®çÂêéÈáçËØï„ÄÇ</p>\r\n            </div>\r\n        `;\r\n    }\r\n}\r\n\r\n// Ê∏≤ÊüìÁ§ºÁâ©ÂàóË°®\r\nfunction renderGifts() {\r\n    const giftGrid = document.getElementById('gift-grid');\r\n    giftGrid.innerHTML = '';\r\n    \r\n    gifts.forEach((gift, index) => {\r\n        const giftItem = document.createElement('div');\r\n        giftItem.className = 'gift-item';\r\n        \r\n        // ÂàõÂª∫Â™í‰ΩìÂÆπÂô®\r\n        const mediaContainer = document.createElement('div');\r\n        mediaContainer.className = 'gift-media-container';\r\n        \r\n        // ÂàõÂª∫Â™í‰ΩìÂÖÉÁ¥†\r\n        let mediaElement;\r\n        if (gift.type === 'image') {\r\n            mediaElement = document.createElement('img');\r\n            mediaElement.src = gift.url;\r\n            mediaElement.alt = 'Á§ºÁâ©ÂõæÁâá';\r\n            mediaElement.className = 'gift-media';\r\n            mediaElement.onclick = function() {\r\n                openImageModal(index);\r\n            };\r\n        } else {\r\n            mediaElement = document.createElement('video');\r\n            mediaElement.src = gift.url;\r\n            mediaElement.className = 'gift-media';\r\n            mediaElement.onclick = function() {\r\n                this.play();\r\n            };\r\n        }\r\n        \r\n        // ÂàõÂª∫Â§áÊ≥®ÂÖÉÁ¥†\r\n        const noteElement = document.createElement('div');\r\n        noteElement.className = 'gift-note';\r\n        noteElement.textContent = gift.note || 'Êó†Â§áÊ≥®';\r\n        \r\n        // ÁªÑË£ÖÂÖÉÁ¥†\r\n        mediaContainer.appendChild(mediaElement);\r\n        giftItem.appendChild(mediaContainer);\r\n        giftItem.appendChild(noteElement);\r\n        \r\n        // Ê∑ªÂä†Âà∞ÁΩëÊ†º\r\n        giftGrid.appendChild(giftItem);\r\n    });\r\n}\r\n\r\n// ÂàùÂßãÂåñÈ°µÈù¢\r\nfunction initPage() {\r\n    initMusicPlayer();\r\n    initImageModal();\r\n    loadShowData();\r\n    initEmojiRain();\r\n}\r\n\r\n// ÂàùÂßãÂåñÈü≥‰πêÊí≠ÊîæÂô®\r\nfunction initMusicPlayer() {\r\n    document.getElementById('play-btn').addEventListener('click', function() {\r\n        if (audio) {\r\n            if (audio.playing()) {\r\n                audio.pause();\r\n                this.textContent = 'Êí≠Êîæ';\r\n            } else {\r\n                audio.play();\r\n                this.textContent = 'ÊöÇÂÅú';\r\n            }\r\n        }\r\n    });\r\n    \r\n    document.getElementById('volume').addEventListener('input', function() {\r\n        if (audio) {\r\n            audio.volume(parseFloat(this.value));\r\n        }\r\n    });\r\n}\r\n\r\n// ÂàùÂßãÂåñÂõæÁâáÂºπÁ™ó\r\nfunction initImageModal() {\r\n    // ÂÖ≥Èó≠ÊåâÈíÆ\r\n    document.querySelector('.close').addEventListener('click', closeImageModal);\r\n    \r\n    // ÁÇπÂáªÂºπÁ™óÂ§ñÈÉ®ÂÖ≥Èó≠\r\n    window.addEventListener('click', function(e) {\r\n        const modal = document.getElementById('image-modal');\r\n        if (e.target === modal) {\r\n            closeImageModal();\r\n        }\r\n    });\r\n}\r\n\r\n// ÊâìÂºÄÂõæÁâáÂºπÁ™ó\r\nfunction openImageModal(index) {\r\n    currentImageIndex = index;\r\n    const gift = gifts[index];\r\n    if (gift.type === 'image') {\r\n        document.getElementById('modal-image').src = gift.url;\r\n        document.getElementById('image-modal').style.display = 'block';\r\n    }\r\n}\r\n\r\n// ÂÖ≥Èó≠ÂõæÁâáÂºπÁ™ó\r\nfunction closeImageModal() {\r\n    document.getElementById('image-modal').style.display = 'none';\r\n}\r\n\r\n// ÂØºËà™ÂõæÁâá\r\nfunction navigateImage(direction) {\r\n    // ËøáÊª§Âá∫ÊâÄÊúâÂõæÁâáÁ§ºÁâ©\r\n    const imageGifts = gifts.filter(gift => gift.type === 'image');\r\n    if (imageGifts.length === 0) return;\r\n    \r\n    // ËÆ°ÁÆóÂΩìÂâçÂõæÁâáÂú®ÂõæÁâáÁ§ºÁâ©‰∏≠ÁöÑÁ¥¢Âºï\r\n    let currentImageGiftIndex = imageGifts.findIndex(gift => {\r\n        return gift.url === gifts[currentImageIndex].url;\r\n    });\r\n    \r\n    // Êõ¥Êñ∞Á¥¢Âºï\r\n    currentImageGiftIndex = (currentImageGiftIndex + direction + imageGifts.length) % imageGifts.length;\r\n    \r\n    // ÊâæÂà∞ÂØπÂ∫îÁöÑÁ§ºÁâ©Á¥¢Âºï\r\n    const giftIndex = gifts.findIndex(gift => {\r\n        return gift.url === imageGifts[currentImageGiftIndex].url;\r\n    });\r\n    \r\n    // ÊâìÂºÄÊñ∞ÂõæÁâá\r\n    openImageModal(giftIndex);\r\n}\r\n\r\n// ÂàùÂßãÂåñË°®ÊÉÖÊéâËêΩÂä®Áîª\r\nfunction initEmojiRain() {\r\n    const letterContent = document.querySelector('.letter-content');\r\n    \r\n    // ÂèØÁà±Ë°®ÊÉÖÈõÜÂêà\r\n    const emojis = ['üòä', 'ü•∞', 'ü§©', 'üåü', 'üéÄ', 'üéâ', '‚ú®', 'üíñ', 'üå∏', 'ü¶ã', 'üåà', 'üíù', 'üíó', 'üíì', 'üíû'];\r\n    \r\n    // È°µÈù¢Âä†ËΩΩÂêéËá™Âä®Ëß¶Âèë‰∏Ä‰∫õË°®ÊÉÖÊéâËêΩ\r\n    setTimeout(() => {\r\n        createEmojiRain(letterContent, emojis);\r\n    }, 500);\r\n    \r\n    // ÊØèÈöî‰∏ÄÊÆµÊó∂Èó¥Ëß¶ÂèëË°®ÊÉÖÊéâËêΩ\r\n    setInterval(() => {\r\n        createEmojiRain(letterContent, emojis);\r\n    }, 2000);\r\n}\r\n\r\n// ÂàõÂª∫Ë°®ÊÉÖÊéâËêΩÊïàÊûú\r\nfunction createEmojiRain(container, emojis) {\r\n    // ÈôêÂà∂ÂêåÊó∂ÊòæÁ§∫ÁöÑË°®ÊÉÖÊï∞Èáè\r\n    const existingEmojis = container.querySelectorAll('.emoji-rain');\r\n    if (existingEmojis.length > 20) return;\r\n    \r\n    // ÂàõÂª∫Â§ö‰∏™Ë°®ÊÉÖ\r\n    const emojiCount = Math.floor(Math.random() * 5) + 3;\r\n    \r\n    for (let i = 0; i < emojiCount; i++) {\r\n        const emoji = document.createElement('div');\r\n        emoji.className = 'emoji-rain';\r\n        emoji.textContent = emojis[Math.floor(Math.random() * emojis.length)];\r\n        \r\n        // ÈöèÊú∫‰ΩçÁΩÆÂíåÊ†∑Âºè\r\n        const left = Math.random() * 100;\r\n        const fontSize = Math.random() * 25 + 20;\r\n        const duration = Math.random() * 4 + 2;\r\n        \r\n        emoji.style.position = 'absolute';\r\n        emoji.style.left = `${left}%`;\r\n        emoji.style.top = '-30px';\r\n        emoji.style.fontSize = `${fontSize}px`;\r\n        emoji.style.pointerEvents = 'none';\r\n        emoji.style.zIndex = '10';\r\n        emoji.style.animation = `emojiFall ${duration}s ease-in-out forwards`;\r\n        \r\n        container.appendChild(emoji);\r\n        \r\n        // Âä®ÁîªÁªìÊùüÂêéÁßªÈô§\r\n        setTimeout(() => {\r\n            emoji.remove();\r\n        }, duration * 1000);\r\n    }\r\n}\r\n\r\n// È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ\r\nwindow.onload = initPage;"],"names":["gifts","currentImageIndex","audio","getUrlParams","params","search","window","location","substring","split","forEach","pair","key","value","decodeURIComponent","loadShowData","showId","id","document","body","innerHTML","response","fetch","result","json","success","data","theme","classList","remove","add","title","siteTitle","getElementById","textContent","letterTitle","letterContent","renderGifts","audioUrl","Howl","src","loop","volume","autoplay","play","audioName","error","console","giftGrid","gift","index","mediaElement","giftItem","createElement","className","mediaContainer","type","url","alt","onclick","openImageModal","noteElement","note","appendChild","initPage","initMusicPlayer","initImageModal","initEmojiRain","addEventListener","playing","pause","parseFloat","querySelector","closeImageModal","e","modal","target","style","display","navigateImage","direction","imageGifts","filter","length","currentImageGiftIndex","findIndex","emojis","setTimeout","createEmojiRain","setInterval","container","existingEmojis","querySelectorAll","emojiCount","Math","floor","random","i","emoji","left","fontSize","duration","position","top","pointerEvents","zIndex","animation","onload"],"version":3,"file":"show.bda338e4.js.map"}